<div class='one-day-box'>
<!-- Date Header -->
	<div class='date-box'>
		<div class="date">{{day.date}}</div>
	</div>

	<div class='daily-box'>

		<!-- Routines -->		
		<div class='routines-box'>
			
			<div class="daily-box-header">
				<div class="daily-box-title">Routines</div>
				
				<div class="ellipsis-right" uib-dropdown>
					<div uib-dropdown-toggle class="glyphicon glyphicon-option-horizontal"></div></a>

					<ul class="uib-dropdown-menu pull-right" aria-labelledby="edit-dropdown">
				      <li>
				        <a ng-click="editRoutines(true)">
				        <div class="glyphicon glyphicon-edit dropdown-icon"></div>Edit Routines</a>
				      </li>
				      <li><a ng-click=""><div class="glyphicon glyphicon-plus dropdown-icon"></div>Add A New Routine</a></li>
      				</ul>

				</div>
			</div>	

			<div ng-repeat="r in day.routines">
  				<div class="routine-single"  ng-show="edit_routines">
  					<div class="routine-checkbox">
  						<input type="checkbox" ng-model="r.done"/>
  					</div>

  					<div class="routine-name my-font-heading">{{r.name}}</div>
  					
  				</div>

  				<div class="routine-single" ng-hide="edit_routines">
  					<div class="routine-checkbox">
  						<div ng-class="{'glyphicon glyphicon-ok':r.done, 'glyphicon glyphicon-remove checkbox-remove':!r.done}"></div>
  					</div>

  					<div class="routine-name my-font-heading">{{r.name}}</div>
  					
  				</div>

  			</div>	
  			<button ng-show="edit_routines" ng-click="editRoutines(false)" type="button" class="btn btn-success routine-button">Done</button>
		</div>

		<!-- Projects -->
		<div class='projects-box'>
			<div class="daily-box-header">
				<div class="daily-box-title">Projects</div>
				
				<div class="ellipsis-right" uib-dropdown uib-dropdown-toggle>
					<div class="glyphicon glyphicon-option-horizontal"></div></a>

					<ul class="uib-dropdown-menu pull-right" aria-labelledby="edit-dropdown">
				      <li>
				        <a ng-click="editProjects(true)">
				          <div class="glyphicon glyphicon-edit dropdown-icon"></div>
				          Edit Projects
				        </a>
				      </li>
				      <li><a ng-click="">
				        <div class="glyphicon glyphicon-plus dropdown-icon"></div>
				        Add A New Project
				      </a></li>
      				</ul>

				</div>		
			</div>	

			<div ng-repeat="p in day.projects" ng-controller="projectController">
				
				<!-- Edit Mode -->
				<div class="project-single"  ng-show="edit_this_project">
  					<div class="project-circular-thumbnail"></div>
  					<div class="project-name my-font-heading">{{p.name}}
  					<div class="project-direction">(hours,minutes)</div>
  					</div>
  					
  					<!-- TimePicker Directive -->
  					<uib-timepicker ng-model="mytime" show-meridian="false" minute-step="15" class="project-timepicker"></uib-timepicker>

  					<angular-rte text-content="p.notes" submit-trigger="submit_trigger"></angular-rte>
  					<div class="textarea-footer">
					  <button class="btn btn-primary" type="button" ng-click="submitTrigger()">OK</button>
					</div>
  					 
  				</div>

  				<!-- Non-Edit Mode -->
  				<div class="project-single" ng-hide="edit_this_project">
  					
  					<div class="project-thumbnail-icon" uib-dropdown uib-dropdown-toggle>
  					  <div class="glyphicon glyphicon-pencil"></div>

  					  <ul class="uib-dropdown-menu" aria-labelledby="edit-project-dropdown">
					      <li>
					        <a ng-click="editThisProject(true)">
					          <div class="glyphicon glyphicon-edit dropdown-icon"></div>
					          Edit Work
					        </a>
					      </li>
					      <li><a ng-click="">
					        <div class="glyphicon glyphicon-trash dropdown-icon"></div>
					        Delete Work
					      </a></li>
      				  </ul>

  					</div>
  					  
  					<div class="project-name my-font-heading">{{p.name}}</div>
  					<div class="project-hours">{{p.hours | hoursminutes}}</div>

  					<div class="project-notes" ng-bind-html="p.notes | sanitize"></div>
  				</div>
  			</div>	
		</div>

		<!-- General Notes -->
		<div class='general-box'>
			<div class="daily-box-header">
				<div class="daily-box-title">general notes</div>

				<div class="ellipsis-right" uib-dropdown uib-dropdown-toggle>
					<div class="glyphicon glyphicon-option-horizontal"></div></a>

					<ul class="uib-dropdown-menu pull-right" aria-labelledby="edit-dropdown">
				      <li>
				        <a ng-click="editNotes(true)">
				        <div class="glyphicon glyphicon-edit dropdown-icon"></div>Edit Notes</a>
				      </li>
      				</ul>

				</div>
				
			</div>	

			<div ng-show="edit_notes" class="general-single">
				<textarea class="general-notes" ng-model="day.general" hummuse-focus="focus_general"></textarea>
				<button ng-click="editNotes(false)" type="button" class="btn btn-primary">Save</button>
				<!--<button ng-click="cancelGeneral()" type="button" class="btn btn-default">Cancel</button> no cancel for the time being-->
			</div>

			<div ng-hide="edit_notes" class="general-single">{{day.general}}</div>
		</div>
	</div>

</div>
